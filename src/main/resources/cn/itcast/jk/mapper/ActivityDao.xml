<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="cn.itcast.jk.dao.scanCon.ActivityDao">
	<resultMap id="activity" type="cn.itcast.jk.domain.Activity">
		<result property="num" column="num" />
		<result property="type" column="type" />
		<result property="theme" column="theme" />
		<result property="time" column="time" />
		<result property="place" column="place" />
		<result property="state" column="state" />
		<result property="launcher" column="launcher" />
		<result property="money" column="money" />
		<result property="teacherneed" column="teacherneed" />
		<result property="teachernum" column="teachernum" />
		<result property="volunteerneed" column="volunteerneed" />
		<result property="volunteernum" column="volunteernum" />
		<result property="audienceneed" column="audienceneed" />
		<result property="audiencenum" column="audiencenum" />
		<result property="craftsmanneed" column="craftsmanneed" />
		<result property="craftsmannum" column="vcraftsmannum" />
		<result property="placeneed" column="placeneed" />
		<result property="introduction" column="introduction" />
		<result property="teachertype" column="teachertype" />
		<result property="people" column="people" />
		<result property="suggestion" column="suggestion" />
	</resultMap>
	<!-- Select SQL -->
	<sql id="activitySelector">
		SELECT
			<if test="fields != null">
				${fields}
			</if>
			<if test="fields == null">
		num,type,theme,time,place,state
			</if>
		FROM dsf_activity
	</sql>
	<sql id="activityListWhere">
		<where>
				<if test="num != null">
					and num=#{num}
				</if>
				<if test="type != null">
				<if test="typeLike == false">
					and type=#{type}
				</if>
				<if test="typeLike == true">
					and type like "%"#{type}"%"
				</if>
				</if>
				<if test="theme != null">
				<if test="themeLike == false">
					and theme=#{theme}
				</if>
				<if test="themeLike == true">
					and theme like "%"#{theme}"%"
				</if>
				</if>
				<if test="time != null">
				<if test="timeLike == false">
					and time=#{time}
				</if>
				<if test="timeLike == true">
					and time like "%"#{time}"%"
				</if>
				</if>
				<if test="place != null">
				<if test="placeLike == false">
					and place=#{place}
				</if>
				<if test="placeLike == true">
					and place like "%"#{place}"%"
				</if>
				</if>
				<if test="state != null">
				<if test="stateLike == false">
					and state=#{state}
				</if>
				<if test="stateLike == true">
					and state like "%"#{state}"%"
				</if>
				</if>

			    <if test="launcher != null">
				<if test="launcherLike == false">
					and launcher=#{launcher}
				</if>
				<if test="launcherLike == true">
					and launcher like "%"#{launcher}"%"
				</if>
				</if>


			    <if test="money != null">
				<if test="moneyLike == false">
					and money=#{money}
				</if>
				<if test="moneyLike == true">
					and money like "%"#{money}"%"
				</if>
			    </if>

			    <if test="volunteerneed != null">
				<if test="volunteerneedLike == false">
					and volunteerneed=#{volunteerneed}
				</if>
				<if test="volunteerneedLike == true">
					and volunteerneedlike "%"#{volunteerneed}"%"
				</if>
			    </if>

			    <if test="volunteernum != null">
				<if test="volunteernumLike == false">
					and volunteernum=#{volunteernum}
				</if>
				<if test="volunteernumLike == true">
					and volunteernumlike "%"#{volunteernum}"%"
				</if>
			    </if>

			    <if test="audienceneed != null">
				<if test="audienceneedLike == false">
					and audienceneed=#{audienceneed}
				</if>
				<if test="audienceneedLike == true">
					and audienceneed like "%"#{audienceneed}"%"
				</if>
			    </if>

			    <if test="audiencenum!= null">
				<if test="audiencenumLike == false">
					and audiencenum=#{audiencenum}
				</if>
				<if test="audiencenumLike == true">
					and audiencenum like "%"#{audiencenum}"%"
				</if>
				</if>

			    <if test="craftsmanneed != null">
				<if test="craftsmanneedLike == false">
					and craftsmanneed=#{craftsmanneed}
				</if>
				<if test="craftsmanneedLike == true">
					and craftsmanneed like "%"#{craftsmanneed}"%"
				</if>
				</if>

			    <if test="craftsmannum != null">
				<if test="craftsmannumLike == false">
					and craftsmannum=#{craftsmannum}
				</if>
				<if test="craftsmannumLike == true">
					and craftsmannum like "%"#{craftsmannum}"%"
				</if>
				</if>

			    <if test="placeneed!= null">
				<if test="placeneedLike == false">
					and placeneed=#{placeneed}
				</if>
				<if test="placeneedLike == true">
					and placeneed like "%"#{placeneed}"%"
				</if>
				</if>

			    <if test="deposit!= null">
				<if test="depositLike == false">
					and deposit=#{deposit}
				</if>
				<if test="depositLike == true">
					and deposit like "%"#{deposit}"%"
				</if>
			    </if>

			    <if test="introduction!= null">
				<if test="introductionLike == false">
					and introduction=#{introduction}
				</if>
				<if test="introductionLike == true">
					and introduction like "%"#{introduction}"%"
				</if>
			    </if>

			    <if test="teacherneed!= null">
				<if test="teacherneedLike == false">
					and teacherneed=#{teacherneed}
				</if>
				<if test="teacherneedLike == true">
					and teacherneed like "%"#{teacherneed}"%"
				</if>
			    </if>

			    <if test="teachernum != null">
				<if test="teachernumLike == false">
					and teachernum=#{teachernum}
				</if>
				<if test="teachernumLike == true">
					and teachernum like "%"#{teachernum}"%"
				</if>
				</if>

			    <if test="teachertype!= null">
				<if test="teachertypeLike == false">
					and teachertype=#{teachertype}
				</if>
				<if test="teachertypeLike == true">
					and teachertype like "%"#{teachertype}"%"
				</if>
			    </if>

			    <if test="people!= null">
				<if test="people== false">
					and people=#{people}
				</if>
				<if test="peopleLike == true">
					and people like "%"#{people}"%"
				</if>
			    </if>
			<if test="suggestion!= null">
				<if test="suggestion== false">
					and suggestion=#{suggestion}
				</if>
				<if test="suggestionLike == true">
					and suggestion like "%"#{suggestion}"%"
				</if>
			</if>

		</where>
	</sql>

	<sql id="activityListOrder">
		<if test="orderFields != null and orderFields.size >0">
		order by 
			<foreach collection="orderFields" separator="," item="orderField">
				${orderField.fieldName} ${orderField.order}
			</foreach>
		</if>
	</sql>

	<sql id="activityListLimit">
		<if test="startRow != null">
			limit #{startRow},#{pageSize}
		</if>
	</sql>

	<!-- 根据主键查询 -->
	<select id="getActivityByKey" resultMap="activity" parameterType="hashMap">
		SELECT num,type,theme,time,place,people,state,launcher,money,volunteerneed,volunteernum,audienceneed,audiencenum,craftsmanneed,craftsmannum,placeneed,deposit,introduction,teacherneed,teachernum,
	teachertype,suggestion FROM dsf_activity
		WHERE
		num=#{num}
	</select>

     <!--根据主键模糊查询-->
    <select id="find" resultType="activity"
            parameterType="hashMap">
        select * from dsf_activity where 1=1
        <if test="num!=null">
            and `num` like '%${num}%'
        </if>
    </select>


	<!--根据state状态(审核通过）进行查询-->
	<select id="select" resultType="activity"
			parameterType="String">
	select * from dsf_activity where state='审核通过'

	</select>


	<!--根据state状态（已发布）进行查寻-->
	<select id="getconfirm" resultType="activity"
			parameterType="String">
		select * from dsf_activity where state='已发布'

	</select>


	<!--根据state状态（审核通过）进行查寻-->
	<select id="getpass" resultType="activity"
			parameterType="String">
		select * from dsf_activity where state='审核通过'

	</select>

	<!-- id查询一个 -->
	<select id="get" parameterType="Integer" resultType="activity">
		SELECT
		*
		FROM
		dsf_activity
		WHERE num= #{num}
	</select>



	<!--根据主键更新状态码-->
	<update id="update" parameterType="map">
		update  dsf_activity set state=#{state}
		where num in
		<foreach collection="state" item="num" open="(" close=")"
				 separator=",">#{num}
		</foreach>
	</update>





	<select id="getActivitysByKeys" resultMap="activity" parameterType="ArrayList">
		SELECT num,type,theme,time,place,people,state,launcher,money,volunteerneed,volunteernum,audienceneed,audiencenum,craftsmanneed,craftsmannum,placeneed,deposit,introduction,teacherneed,teachernum,
		teachertype,suggestion FROM dsf_activity
		WHERE
		num in
		<foreach collection="list" separator="," item="num" open="(" close=")">
			#{num}
		</foreach>
	</select>

	<!-- 根据主键删除 -->
	<delete id="deleteByKey"   parameterType="hashMap">
		DELETE FROM dsf_activity
		WHERE
		num=#{num}
	</delete>


	<!-- 根据主键批量删除 -->
	<delete id="deleteByKeys">
		DELETE FROM dsf_activity
		WHERE
		num in
		<foreach collection="list" separator="," item="num" open="(" close=")">
			#{num}
		</foreach>
	</delete>

	<!-- 根据主键更新 -->
	<update id="updateActivityByKey" parameterType="Activity">
		UPDATE dsf_activity
		<set>
			<trim suffixOverrides=",">
				<if test="num != null">
					num = #{num},
				</if>
				<if test="type != null">
					type = #{type},
				</if>
				<if test="theme != null">
					theme = #{theme},
				</if>
				<if test="time != null">
					time = #{time},
				</if>
				<if test="place != null">
					place = #{place},
				</if>
				<if test="people != null">
					people = #{people},
				</if>
				<if test="state != null">
					state = #{state},
				</if>

				<if test="launcher != null">
					launcher= #{launcher},
				</if>

				<if test="money != null">
					money= #{money},
				</if>

				<if test="volunteerneed != null">
					volunteerneed= #{volunteerneed},
				</if>

				<if test="volunteernum != null">
					volunteernum= #{volunteernum},
				</if>

				<if test="audienceneed != null">
					audienceneed= #{audienceneed},
				</if>

				<if test="audiencenum != null">
					audiencenum= #{audiencenum},
				</if>

				<if test="craftsmanneed!= null">
					craftsmanneed= #{craftsmanneed},
				</if>

				<if test="craftsmannum!= null">
					craftsmannum= #{craftsmannum},
				</if>

				<if test="placeneed!= null">
					placeneed= #{placeneed},
				</if>

				<if test="deposit!= null">
				    deposit= #{deposit},
				</if>

				<if test="introduction!= null">
					introduction= #{introduction},
				</if>

				<if test="teacherneed!= null">
					teacherneed= #{teacherneed},
				</if>

				<if test="teachernum!= null">
					teachernum= #{teachernum},
				</if>

				<if test="teachertype!= null">
					teachertype= #{teachertype},
				</if>
				<if test="suggestion!= null">
					suggestion= #{suggestion},
				</if>
			</trim>
		</set>
		WHERE
		num=#{num}
	</update>
	<!-- 分页 -->
	<select id="getActivityListWithPage" parameterType="ActivityQuery" resultMap="activity">
		<include refid="activitySelector" />
		<include refid="activityListWhere" />
		<include refid="activityListOrder" />
		<include refid="activityListLimit" />
	</select>
	<!-- 数据总数 -->
	<select id="getActivityListCount" parameterType="ActivityQuery" resultType="int">
		SELECT count(1) FROM dsf_activity
		<include refid="activityListWhere" />
	</select>
	<!-- 数据集合 -->
	<select id="getActivityList" parameterType="ActivityQuery" resultMap="activity">
		<include refid="activitySelector" />
		<include refid="activityListWhere" />
		<include refid="activityListOrder" />
	</select>



	<!--&lt;!&ndash; 添加 &ndash;&gt;-->
	<!--<insert id="addActivity" parameterType="Activity">-->
		<!--INSERT INTO dsf_activity-->
		<!--<trim prefix="(" suffix=")" suffixOverrides=",">-->
				<!--<if test="num != null">-->
					<!--num,-->
				<!--</if>-->
				<!--<if test="type != null">-->
					<!--type,-->
				<!--</if>-->
				<!--<if test="theme != null">-->
					<!--theme,-->
				<!--</if>-->
				<!--<if test="time != null">-->
					<!--time,-->
				<!--</if>-->
				<!--<if test="place != null">-->
					<!--place,-->
				<!--</if>-->
				<!--<if test="state != null">-->
					<!--state,-->
				<!--</if>-->
			    <!--<if test="launcher != null">-->
					<!--launcher,-->
			    <!--</if>-->
			    <!--<if test="people != null">-->
				    <!--people,-->
			    <!--</if>-->
			    <!--<if test="money != null">-->
				    <!--money,-->
			    <!--</if>-->
			    <!--<if test="volunteerneed != null">-->
					<!--volunteerneed,-->
			    <!--</if>-->
			    <!--<if test="volunteernum != null">-->
			        <!--volunteernum,-->
		        <!--</if>-->
			    <!--<if test="audienceneed != null">-->
					<!--audienceneed,-->
				<!--</if>-->
			    <!--<if test="audiencenum != null">-->
					<!--audiencenum,-->
			    <!--</if>-->
			    <!--<if test="craftsmanneed!= null">-->
					<!--craftsmanneed,-->
			    <!--</if>-->
			    <!--<if test="craftsmannum!= null">-->
					<!--craftsmannum,-->
			    <!--</if>-->
			    <!--<if test="placeneed!= null">-->
					<!--placeneed,-->
				<!--</if>-->
			    <!--<if test="deposit!= null">-->
			        <!--deposit,-->
				<!--</if>-->
			    <!--<if test="introduction!= null">-->
					<!--introduction,-->
		        <!--</if>-->
			    <!--<if test="teacherneed!= null">-->
					<!--teacherneed,-->
			    <!--</if>-->
			    <!--<if test="teachernum!= null">-->
					<!--teachernum,-->
			    <!--</if>-->
			    <!--<if test="teachertype!= null">-->
				    <!--teachertype,-->
				<!--</if>-->
			    <!--<if test="suggestion!= null">-->
				    <!--suggestion-->
			    <!--</if>-->
		<!--</trim>-->
		<!--VALUES-->
		<!--<trim prefix="(" suffix=")" suffixOverrides=",">-->
					<!--<if test="num != null">-->
						<!--#{num},-->
					<!--</if>-->
					<!--<if test="type != null">-->
						<!--#{type},-->
					<!--</if>-->
					<!--<if test="theme != null">-->
						<!--#{theme},-->
					<!--</if>-->
					<!--<if test="time != null">-->
						<!--#{time},-->
					<!--</if>-->
					<!--<if test="place != null">-->
						<!--#{place},-->
					<!--</if>-->
					<!--<if test="state != null">-->
						<!--#{state}-->
					<!--</if>-->
			        <!--<if test="people != null">-->
				        <!--#{people}-->
			        <!--</if>-->
                    <!--<if test="launcher != null">-->
				        <!--#{launcher},-->
					<!--</if>-->
			        <!--<if test="volunteerneed != null">-->
				        <!--#{volunteerneed},-->
					<!--</if>-->
			        <!--<if test="volunteernum != null">-->
				        <!--#{volunteernum},-->
			        <!--</if>-->
			        <!--<if test="audienceneed != null">-->
				        <!--#{audienceneed},-->
			        <!--</if>-->
			        <!--<if test="audiencenum != null">-->
				        <!--#{audiencenum},-->
			        <!--</if>-->
			        <!--<if test="craftsmanneed != null">-->
				        <!--#{craftsmanneed},-->
					<!--</if>-->
			        <!--<if test="craftsmannum!= null">-->
				        <!--#{craftsmannum},-->
					<!--</if>-->
			        <!--<if test="placeneed != null">-->
				        <!--#{placeneed},-->
			        <!--</if>-->
			        <!--<if test="deposit != null">-->
				        <!--#{deposit},-->
			        <!--</if>-->
			        <!--<if test="introduction != null">-->
				        <!--#{introduction},-->
			        <!--</if>-->
			        <!--<if test="teacherneed!= null">-->
				        <!--#{teacherneed},-->
			        <!--</if>-->
			        <!--<if test="teachernum!= null">-->
				        <!--#{teachernum},-->
			        <!--</if>-->
			        <!--<if test="teachertype!= null">-->
				        <!--#{teachertype},-->
			        <!--</if>-->
			        <!--<if test="suggestion!= null">-->
				        <!--#{suggestion}-->
			        <!--</if>-->
		<!--</trim>-->
	<!--</insert>-->
</mapper>
